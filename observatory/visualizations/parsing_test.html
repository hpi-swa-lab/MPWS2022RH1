<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Parsing Test</title>

        <link rel="stylesheet" type="text/css" href="/assets/css/dist/main.css" />
    </head>

    <body>
        <div class="control-container">
            <h1>Parsing Test</h1>

            <br />

            <label for="input-file-methods">Methods File:</label>
            <input type="file" id="input-file-methods" accept=".txt" />

            <br />

            <button id="buttonConfirm">Parsen!</button>
        </div>
        <div id="container" class="svg-container"></div>

        <script type="module">
            import {
                parse_to_package_hierarchy,
                load_text_file
            } from '../assets/js/build_report_parser.js'
            const methodsInput = document.getElementById('input-file-methods')
            const buttonConfirm = document.getElementById('buttonConfirm')

            buttonConfirm.addEventListener('click', async () => {
                const errorMessages = []

                if (!methodsInput.files.length > 0) {
                    alert('No methods file given')
                    return
                }

                const csv_data = await load_text_file(methodsInput.files[0])
                console.log(csv_data)

                const graph = parse_to_package_hierarchy(csv_data)
                console.log(graph)
            })
        </script>
    </body>
</html>
